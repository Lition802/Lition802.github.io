<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="考试的时候看到考试软件有检测失焦的功能，切屏到一定次数会判定为不及格，好奇的了解了一下原理。"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>通过js判断网页失焦 | Lition的博客</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><meta name="generator" content="Hexo 7.0.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-none-link" href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag">技术</a></div><div class="post-time">2023-11-30</div></div></div><div class="container post-header"><h1>通过js判断网页失焦</h1></div><div class="container post-content"><p>考试的时候看到考试软件有检测失焦的功能，切屏到一定次数会判定为不及格，好奇的了解了一下原理。</p>
<p>以下摘自W3school。</p>
<blockquote>
<p><code>onblur</code>是一个JavaScript事件，用于在元素失去焦点时触发特定的操作或函数。<code>onblur</code> 事件与 <code>onfocus</code> 事件相反。</p>
</blockquote>
<p>通过js监听<code>onfous</code>和<code>onblur</code>事件，自己尝试实现了一下。</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> blurtime = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> focustime = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> isFirst = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onfocus</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	focustime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">valueOf</span>();</span><br><span class="line">	<span class="keyword">let</span> second = (focustime - blurtime) / <span class="number">1000</span>;</span><br><span class="line">	second = <span class="title class_">Math</span>.<span class="title function_">round</span>((second + <span class="title class_">Number</span>.<span class="property">EPSILON</span>) * <span class="number">10</span>) / <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">if</span> (!isFirst) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`请注意，你失去焦点了！总共离开<span class="subst">$&#123;second&#125;</span>秒`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (isFirst) &#123;</span><br><span class="line">		isFirst = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	blurtime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">valueOf</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>同时本页面也嵌入了这个代码，按下<code>F12</code>进入控制台即可看到输出。</p>
<script>console.log('加载成功，开始监听网页失焦');let blurtime=null;let focustime=null;let isFirst=true;window.onfocus=function(){focustime=new Date().valueOf();let second=(focustime-blurtime)/1000;second=Math.round((second+Number.EPSILON)*10)/10;if(!isFirst){console.log(`请注意，你失去焦点了！总共离开${second}秒`)}};window.onblur=function(){if(isFirst){isFirst=false}blurtime=new Date().valueOf()};</script></div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/lato-font/3.0.0/css/lato-font.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcdn.net/ajax/libs/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcdn.net/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>